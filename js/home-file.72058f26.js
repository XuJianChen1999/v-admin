"use strict";(self.webpackChunkdemo=self.webpackChunkdemo||[]).push([[9351],{9584:function(e,l,t){t.d(l,{VO:function(){return u},af:function(){return r},y7:function(){return n}});var a=t(9805),o=t(1073);const n={url:`${o.Z.API_URL}/upload`,name:"文件上传",post:async function(e,l={}){return await a.Z.post(this.url,e,l)}},r={url:`${o.Z.API_URL}/file/list`,name:"获取文件列表",get:async function(e){return await a.Z.get(this.url,e)}},u={url:`${o.Z.API_URL}/file/menu`,name:"获取文件分类",get:async function(){return await a.Z.get(this.url)}};l.ZP={upload:{url:`${o.Z.API_URL}/upload`,name:"文件上传",post:async function(e,l={}){return await a.Z.post(this.url,e,l)}},uploadFile:{url:`${o.Z.API_URL}/uploadFile`,name:"附件上传",post:async function(e,l={}){return await a.Z.post(this.url,e,l)}},exportFile:{url:`${o.Z.API_URL}/fileExport`,name:"导出附件",get:async function(e,l={}){return console.log("this.url------",o.Z),await a.Z.get(this.url,e,l)}},importFile:{url:`${o.Z.API_URL}/fileImport`,name:"导入附件",post:async function(e,l={}){return await a.Z.post(this.url,e,l)}}}},9805:function(e,l,t){var a=t(6265),o=t.n(a),n=t(5410),r=t.n(n),u=t(4076),i=t(2807),s=t(5499),m=t(327),d=t(2111),p=t(1073),c=t(6259);let f=null;const w=new Map,b=[500,502,503,504,403,404,400,401],_={400:"请求错误",401:"登录状态失效，请重新登录",403:"拒绝访问",404:"请求地址不存在",500:"服务器繁忙",502:"网关错误",503:"服务不可用，服务器暂时过载或维护",504:"网关超时"},W='\n<path class="path" d="\n  M 30 15\n  L 28 17\n  M 25.61 25.61\n  A 15 15, 0, 0, 1, 15 30\n  A 15 15, 0, 1, 1, 27.99 7.5\n  L 15 15\n" style="stroke-width: 4px; fill: rgba(0, 0, 0, 0)"/>\n';function U(e){const{url:l,params:t,data:a={}}=e;return[e.method||"get",l,r().stringify(t),r().stringify(a)].join("&")}function k(e){const l=U(e);w.has(l)&&(w.get(l)(l),w.delete(l))}o().defaults.withCredentials=!0,o().defaults.timeout=p.Z.TIMEOUT,o().interceptors.request.use((e=>{const{lock:l=!0,loading:t=!0,text:a="加载中...",spinner:n=W,background:r="rgba(0, 0, 0, 0.7)"}=e;t&&(f=u.kN.service({lock:l,text:a,spinner:n,background:r})),k(e),function(e){const l=U(e);e.cancelToken=e.cancelToken||new(o().CancelToken)((e=>{w.has(l)||w.set(l,e)}))}(e);let i=(0,c.LP)();return i&&(console.log(p.Z.TOKEN_NAME),e.headers[p.Z.TOKEN_NAME]=i),p.Z.REQUEST_CACHE||"get"!==e.method||(e.params=e.params||{}),Object.assign(e.headers,p.Z.HEADERS),e}),(e=>Promise.reject(e))),o().interceptors.response.use((e=>{const{status:l,data:t}=e;if([401,403].includes(l))return(0,c.xY)(),window.location.reload(),!1;!t.flag&&i.z8.error(t.message),k(e.config);const a=setTimeout((()=>{f&&f.close(),clearTimeout(a)}),p.Z.HIDE_LOADING_TIME);return e.data}),(e=>{const l=setTimeout((()=>{f&&f.close(),clearTimeout(l)}),p.Z.HIDE_LOADING_TIME);if(e.response){const l=e.response,t=l.status;if(b.includes(t)){if([401,403].includes(t))return void s.T.confirm("当前用户已被登出或无权限访问当前资源，请尝试重新登录后再操作。","无权限访问",{type:"error",center:!0,showClose:!1,showCancelButton:!1,closeOnClickModal:!1,confirmButtonText:"重新登录"}).then((()=>{(0,c.xY)(),d.Z.replace({path:"/login"})})).catch((()=>{}));m.bM.error({title:"请求错误",message:_[t]})}else m.bM.error({title:"请求错误",message:l.data.message||`Status:${l.status}，未知错误！`})}else console.error(e),m.bM.error({title:"请求错误",message:"请求服务器无响应！"});return Promise.reject(e.response)})),l.Z=o()},9269:function(e,l,t){t.r(l),t.d(l,{default:function(){return A}});var a=t(3396),o=t(4870),n=t(2492),r=t(9584);const u=(0,a.Uk)("导入(全配置)"),i=(0,a._)("div",{class:"el-upload__text"},[(0,a.Uk)(" 将文件拖到此处或 "),(0,a._)("em",null,"点击选择文件上传")],-1),s=(0,a.Uk)("Object 文件上传接口对象"),m=(0,a.Uk)("Object 上传时附带的额外参数"),d=(0,a.Uk)('String 可选择文件类型，默认为".xls, .xlsx"'),p=(0,a.Uk)("Number 可选择文件大小，单位为M，默认为10"),c=(0,a.Uk)('String 上传框底下的提示语句，默认为"请上传小于或等于 {maxSize}M 的 {accept} 格式文件"'),f=(0,a.Uk)("String 模板的下载URL"),w=(0,a.Uk)("事件 上传接口返回的事件，返回function(res, close)，执行close()将关闭窗口"),b=(0,a.Uk)("插糟 默认触发按钮插糟，返回open()打开窗口函数，可以绑定元素@click事件"),_=(0,a.Uk)("插糟 自定义上传框插槽"),W=(0,a.Uk)("插糟 自定义表单组件，插槽formData都将作为上传时附带的额外参数"),U=(0,a.Uk)("导出(blob文件流)"),k=(0,a.Uk)("Object 文件导出接口对象，通过apiObj.url请求文件"),h=(0,a.Uk)("Object 上传时附带的额外参数(可为数据表格的过滤项)"),g=(0,a.Uk)("String 下载文件名称，默认为当前时间戳"),x=(0,a.Uk)("Array 可选择文件类型，默认为['xlsx']，组件将数组第一项当做已选项"),y=(0,a.Uk)('Array 列配置，请求文件时将添加column为key的参数，值为prop逗号","分割的字符串'),v=(0,a.Uk)("Boolean 是否由游览器请求文件返回blob后提供下载"),Z=(0,a.Uk)("Boolean blob开启后是否显示下载文件进度条，当服务器启用Gzip时，建议关闭，因为获取到的文件总数和下载总数不匹配。"),O=(0,a.Uk)("插糟 默认触发按钮插糟，返回open()打开窗口函数，可以绑定元素@click事件"),S=(0,a.Uk)("插糟 自定义表单组件，插槽formData都将作为请求时附带的额外参数"),j={style:{"margin-top":"15px"}},T=(0,a.Uk)(" 失败"),C=(0,a.Uk)("我知道了");var A={setup(e){const l=(0,a.RC)((()=>t.e(4231).then(t.bind(t,4231)))),A=(0,a.RC)((()=>t.e(5188).then(t.bind(t,5188)))),E=(0,o.iH)({}),I=(0,o.iH)(!1),P=[{label:"姓名",prop:"name"},{label:"性别",prop:"sex"},{label:"评分",prop:"num"},{label:"邮箱",prop:"email",hide:!0},{label:"进度",prop:"progress"},{label:"注册时间",prop:"datetime"}];function V(e,l){200===e.code?((0,n.v)("导入返回成功后，可后续操作，比如刷新表格等。执行回调函数close()可关闭上传窗口。","导入成功",{type:"success",showClose:!1,center:!0}),l()):(I.value=!0,E.value=e.data)}return(e,t)=>{const M=(0,a.up)("el-button"),D=(0,a.up)("el-switch"),L=(0,a.up)("el-form-item"),R=(0,a.up)("el-descriptions-item"),N=(0,a.up)("el-descriptions"),$=(0,a.up)("el-card"),F=(0,a.up)("el-col"),z=(0,a.up)("el-option"),H=(0,a.up)("el-select"),B=(0,a.up)("el-row"),G=(0,a.up)("el-main"),K=(0,a.up)("el-table-column"),Y=(0,a.up)("el-icon-circle-close-filled"),q=(0,a.up)("el-icon"),Q=(0,a.up)("el-tag"),J=(0,a.up)("el-table"),X=(0,a.up)("el-dialog");return(0,a.wg)(),(0,a.iD)("div",null,[(0,a.Wm)(G,{style:{padding:"0"}},{default:(0,a.w5)((()=>[(0,a.Wm)(B,{gutter:15},{default:(0,a.w5)((()=>[(0,a.Wm)(F,{lg:12},{default:(0,a.w5)((()=>[(0,a.Wm)($,{shadow:"never",header:"导入(使用mock,有50%几率导入失败)"},{default:(0,a.w5)((()=>[(0,a.Wm)((0,o.SU)(l),{apiObj:(0,o.SU)(r.ZP).importFile,templateUrl:"http://www.scuiadmin/file.xlsx",onSuccess:V},null,8,["apiObj"]),(0,a.Wm)((0,o.SU)(l),{apiObj:(0,o.SU)(r.ZP).importFile,data:{otherData:"demo"},templateUrl:"http://www.scuiadmin/file.xlsx",accept:".xls, .xlsx",maxSize:30,tip:"请上传小于或等于 30M 的 .xls, .xlsx 格式文件(自定义TIP)",onSuccess:V},{default:(0,a.w5)((({open:e})=>[(0,a.Wm)(M,{type:"primary",icon:"el-icon-upload",onClick:e},{default:(0,a.w5)((()=>[u])),_:2},1032,["onClick"])])),uploader:(0,a.w5)((()=>[i])),form:(0,a.w5)((({formData:e})=>[(0,a.Wm)(L,{label:"覆盖已有数据"},{default:(0,a.w5)((()=>[(0,a.Wm)(D,{modelValue:e.coverage,"onUpdate:modelValue":l=>e.coverage=l},null,8,["modelValue","onUpdate:modelValue"])])),_:2},1024),(0,a.Wm)(L,{label:"跳过错误数据"},{default:(0,a.w5)((()=>[(0,a.Wm)(D,{modelValue:e.skipError,"onUpdate:modelValue":l=>e.skipError=l},null,8,["modelValue","onUpdate:modelValue"])])),_:2},1024)])),_:1},8,["apiObj"]),(0,a.Wm)(N,{column:1,border:"",size:"small",style:{"margin-top":"15px"}},{default:(0,a.w5)((()=>[(0,a.Wm)(R,{label:"apiObj",width:200},{default:(0,a.w5)((()=>[s])),_:1}),(0,a.Wm)(R,{label:"data"},{default:(0,a.w5)((()=>[m])),_:1}),(0,a.Wm)(R,{label:"accept"},{default:(0,a.w5)((()=>[d])),_:1}),(0,a.Wm)(R,{label:"maxSize"},{default:(0,a.w5)((()=>[p])),_:1}),(0,a.Wm)(R,{label:"tip"},{default:(0,a.w5)((()=>[c])),_:1}),(0,a.Wm)(R,{label:"templateUrl"},{default:(0,a.w5)((()=>[f])),_:1}),(0,a.Wm)(R,{label:"@success"},{default:(0,a.w5)((()=>[w])),_:1}),(0,a.Wm)(R,{label:'#default="{open}"'},{default:(0,a.w5)((()=>[b])),_:1}),(0,a.Wm)(R,{label:"#uploader"},{default:(0,a.w5)((()=>[_])),_:1}),(0,a.Wm)(R,{label:'#form="{formData}"'},{default:(0,a.w5)((()=>[W])),_:1})])),_:1})])),_:1})])),_:1}),(0,a.Wm)(F,{lg:12},{default:(0,a.w5)((()=>[(0,a.Wm)($,{shadow:"never",header:"导出"},{default:(0,a.w5)((()=>[(0,a.Wm)((0,o.SU)(A),{apiObj:(0,o.SU)(r.ZP).exportFile},null,8,["apiObj"]),(0,a.Wm)((0,o.SU)(A),{apiObj:(0,o.SU)(r.ZP).exportFile,blob:"",fileName:"人员列表",data:{otherData:"demo"},column:P,fileTypes:["xlsx","docx","pdf"]},{default:(0,a.w5)((({open:e})=>[(0,a.Wm)(M,{type:"primary",icon:"el-icon-download",onClick:e},{default:(0,a.w5)((()=>[U])),_:2},1032,["onClick"])])),form:(0,a.w5)((({formData:e})=>[(0,a.Wm)(L,{label:"导出条数"},{default:(0,a.w5)((()=>[(0,a.Wm)(H,{modelValue:e.limit,"onUpdate:modelValue":l=>e.limit=l,placeholder:"Select"},{default:(0,a.w5)((()=>[(0,a.Wm)(z,{label:"100条",value:"100"}),(0,a.Wm)(z,{label:"500条",value:"500"}),(0,a.Wm)(z,{label:"1000条",value:"1000"}),(0,a.Wm)(z,{label:"5000条",value:"5000"}),(0,a.Wm)(z,{label:"10000条",value:"10000"})])),_:2},1032,["modelValue","onUpdate:modelValue"])])),_:2},1024)])),_:1},8,["apiObj"]),(0,a.Wm)(N,{column:1,border:"",size:"small",style:{"margin-top":"15px"}},{default:(0,a.w5)((()=>[(0,a.Wm)(R,{label:"apiObj",width:200},{default:(0,a.w5)((()=>[k])),_:1}),(0,a.Wm)(R,{label:"data"},{default:(0,a.w5)((()=>[h])),_:1}),(0,a.Wm)(R,{label:"fileName"},{default:(0,a.w5)((()=>[g])),_:1}),(0,a.Wm)(R,{label:"fileTypes"},{default:(0,a.w5)((()=>[x])),_:1}),(0,a.Wm)(R,{label:"column"},{default:(0,a.w5)((()=>[y])),_:1}),(0,a.Wm)(R,{label:"blob"},{default:(0,a.w5)((()=>[v])),_:1}),(0,a.Wm)(R,{label:"progress"},{default:(0,a.w5)((()=>[Z])),_:1}),(0,a.Wm)(R,{label:'#default="{open}"'},{default:(0,a.w5)((()=>[O])),_:1}),(0,a.Wm)(R,{label:'#form="{formData}"'},{default:(0,a.w5)((()=>[S])),_:1})])),_:1})])),_:1})])),_:1})])),_:1})])),_:1}),(0,a.Wm)(X,{modelValue:I.value,"onUpdate:modelValue":t[1]||(t[1]=e=>I.value=e),title:"导入失败",width:680,"destroy-on-close":"",onClosed:t[2]||(t[2]=()=>{E.value={}})},{footer:(0,a.w5)((()=>[(0,a.Wm)(M,{type:"primary",onClick:t[0]||(t[0]=e=>I.value=!1)},{default:(0,a.w5)((()=>[C])),_:1})])),default:(0,a.w5)((()=>[(0,a.Wm)((0,o.SU)(n.v),{title:`总条目数 ${E.value.ok} ,其中有 ${E.value.fail} 条格式不满足导入要求，请修改后再次操作。`,type:"error","show-icon":"",closable:!1},null,8,["title"]),(0,a._)("div",j,[(0,a.Wm)(J,{data:E.value.failList,border:"",stripe:"","max-height":"270",style:{width:"100%"}},{default:(0,a.w5)((()=>[(0,a.Wm)(K,{prop:"keyName",label:"主键名",width:"180"}),(0,a.Wm)(K,{prop:"",label:"状态",width:"100"},{default:(0,a.w5)((()=>[(0,a.Wm)(Q,{type:"danger"},{default:(0,a.w5)((()=>[(0,a.Wm)(q,null,{default:(0,a.w5)((()=>[(0,a.Wm)(Y)])),_:1}),T])),_:1})])),_:1}),(0,a.Wm)(K,{prop:"reason",label:"原因"})])),_:1},8,["data"])])])),_:1},8,["modelValue"])])}}}}}]);