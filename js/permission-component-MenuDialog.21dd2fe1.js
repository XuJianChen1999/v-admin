"use strict";(self.webpackChunkdemo=self.webpackChunkdemo||[]).push([[2852],{3460:function(e,l,a){a.r(l),a.d(l,{default:function(){return d}});var t=a(3396),u=a(4870),n=a(2807);const o=(0,t.Uk)("立即创建");var d={props:{menus:{type:Array,default:()=>[]},parentRoutes:{type:Array,default:()=>[]},formData:{type:Object},modelValue:{type:Boolean,default:!1}},emits:["update:modelValue"],setup(e,{emit:l}){const a=e,d=(0,u.iH)(!1),p=(0,u.iH)(!1),r=(0,u.iH)({name:"",rank:"",path:"",sort:"",desc:"",parent:""});(0,t.YP)((()=>a.modelValue),(()=>{const e=a,l=e.formData;r.value={name:l.name,path:l.path,rank:l.hasChildren?2:1,sort:l.index,isEnable:l.isEnable,parent:l.hasChildren?e.parentRoutes.filter((e=>e.path===l.path))[0].path:null},d.value=!l.hasChildren}));const m={name:[{required:!0,message:"请选择菜单名称"}],rank:[{required:!0,message:"请选择菜单级别"}],path:[{required:!0,message:"请配置跳转路径"}],parent:[{required:!0,message:"请选择父级菜单"}]};function s(){l("update:modelValue",!1)}function i(){const e=a.menus,l=r.value;let t=e;if(d.value){let a={path:l.path,name:l.name,title:l.name,hasChildren:!1,index:e.length+1,isEnable:!1};t.push(a)}else console.log(d.value),t.push({hasChildren:!0,children:[],index:e.length+1,path:l.parent,isEnable:!1,component:`${l.parent}${l.path}`,title:l.name});l.path.startsWith("/")?(n.z8.success("创建成功"),r.value={name:"",rank:"",path:"",sort:"",desc:"",parent:""},s()):n.z8.warning("路径必须以 / 开头")}function h(e){d.value=2!==e,p.value=2!==e}function c(e){console.log(e)}return(l,a)=>{const u=(0,t.up)("el-input"),n=(0,t.up)("el-form-item"),p=(0,t.up)("el-option"),f=(0,t.up)("el-select"),v=(0,t.up)("el-button"),w=(0,t.up)("el-form"),b=(0,t.up)("el-dialog");return(0,t.wg)(),(0,t.j4)(b,{title:"添加菜单","model-value":e.modelValue,onClose:s},{default:(0,t.w5)((()=>[(0,t.Wm)(w,{model:r.value,rules:m,ref:"ruleFormRef","label-width":"100px",class:"demo-ruleForm","label-position":"left"},{default:(0,t.w5)((()=>[(0,t.Wm)(n,{label:"菜单名称",prop:"name","label-width":"100px"},{default:(0,t.w5)((()=>[(0,t.Wm)(u,{style:{width:"270px"},modelValue:r.value.name,"onUpdate:modelValue":a[0]||(a[0]=e=>r.value.name=e),placeholder:"请填写菜单名称"},null,8,["modelValue"])])),_:1}),(0,t.Wm)(n,{label:"菜单级别",prop:"rank"},{default:(0,t.w5)((()=>[(0,t.Wm)(f,{style:{width:"270px"},onChange:h,modelValue:r.value.rank,"onUpdate:modelValue":a[1]||(a[1]=e=>r.value.rank=e),placeholder:"请选择菜单级别"},{default:(0,t.w5)((()=>[(0,t.Wm)(p,{label:"一级",value:1}),(0,t.Wm)(p,{label:"二级",value:2})])),_:1},8,["modelValue"])])),_:1}),(0,t.Wm)(n,{label:"父级菜单",prop:"parent"},{default:(0,t.w5)((()=>[(0,t.Wm)(f,{disabled:d.value,style:{width:"270px"},onChange:c,modelValue:r.value.parent,"onUpdate:modelValue":a[2]||(a[2]=e=>r.value.parent=e),placeholder:"当菜单级别为二级时可选"},{default:(0,t.w5)((()=>[((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(e.parentRoutes,(e=>((0,t.wg)(),(0,t.j4)(p,{key:e.path,label:e.meta.title,value:e.path},null,8,["label","value"])))),128))])),_:1},8,["disabled","modelValue"])])),_:1}),(0,t.Wm)(n,{label:"路径",prop:"path"},{default:(0,t.w5)((()=>[(0,t.Wm)(u,{placeholder:"请配置跳转路径，如：/shopMallList",style:{width:"270px"},modelValue:r.value.path,"onUpdate:modelValue":a[3]||(a[3]=e=>r.value.path=e)},null,8,["modelValue"])])),_:1}),(0,t.Wm)(n,{label:"说明",prop:"desc"},{default:(0,t.w5)((()=>[(0,t.Wm)(u,{style:{width:"270px"},modelValue:r.value.desc,"onUpdate:modelValue":a[4]||(a[4]=e=>r.value.desc=e),placeholder:"关于此菜单的描述"},null,8,["modelValue"])])),_:1}),(0,t.Wm)(n,null,{default:(0,t.w5)((()=>[(0,t.Wm)(v,{type:"primary",onClick:i},{default:(0,t.w5)((()=>[o])),_:1})])),_:1})])),_:1},8,["model"])])),_:1},8,["model-value"])}}}}}]);