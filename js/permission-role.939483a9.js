"use strict";(self.webpackChunkAdmin=self.webpackChunkAdmin||[]).push([[9493],{3626:function(e,l){l.Z={page:1,size:10,total:0,background:!0,hideOnSinglePage:!0,layout:"total, sizes, prev, pager, next, jumper",pageSizes:[5,10,15,20,25,30]}},5631:function(e,l,n){n.d(l,{E$:function(){return i},em:function(){return u},xJ:function(){return o}});var t=n(9805),a=n(8439);const o=e=>(0,t.Z)({url:`${a.nY}/roleInfo/getRoleList`,params:e,hasload:1}),u=e=>(0,t.Z)({url:`${a.nY}/roleInfo/InfoRole`,params:{roleName:e}}),i=e=>(0,t.Z)({url:`${a.nY}/menuInfo/allMenuRole?roleId=${e}`})},9805:function(e,l,n){var t=n(6265),a=n.n(t),o=n(5410),u=n.n(o),i=n(4076),r=n(2807),s=n(5499),c=n(327),d=n(2111),p=n(1073),m=n(6259);let f=null;const v=new Map,g=[500,502,503,504,403,404,400,401],h={400:"请求错误",401:"登录状态失效，请重新登录",403:"拒绝访问",404:"请求地址不存在",500:"服务器繁忙",502:"网关错误",503:"服务不可用，服务器暂时过载或维护",504:"网关超时"},w='\n<path class="path" d="\n  M 30 15\n  L 28 17\n  M 25.61 25.61\n  A 15 15, 0, 0, 1, 15 30\n  A 15 15, 0, 1, 1, 27.99 7.5\n  L 15 15\n" style="stroke-width: 4px; fill: rgba(0, 0, 0, 0)"/>\n';function b(e){const{url:l,params:n,data:t={}}=e;return[e.method||"get",l,u().stringify(n),u().stringify(t)].join("&")}function k(e){const l=b(e);v.has(l)&&(v.get(l)(l),v.delete(l))}a().defaults.withCredentials=!0,a().defaults.timeout=p.Z.TIMEOUT,a().interceptors.request.use((e=>{const{lock:l=!0,loading:n=!0,text:t="加载中...",spinner:o=w,background:u="rgba(0, 0, 0, 0.7)"}=e;n&&(f=i.kN.service({lock:l,text:t,spinner:o,background:u})),k(e),function(e){const l=b(e);e.cancelToken=e.cancelToken||new(a().CancelToken)((e=>{v.has(l)||v.set(l,e)}))}(e);let r=(0,m.LP)();return r&&(console.log(p.Z.TOKEN_NAME),e.headers[p.Z.TOKEN_NAME]=r),p.Z.REQUEST_CACHE||"get"!==e.method||(e.params=e.params||{}),Object.assign(e.headers,p.Z.HEADERS),e}),(e=>Promise.reject(e))),a().interceptors.response.use((e=>{const{status:l,data:n}=e;if([401,403].includes(l))return(0,m.xY)(),window.location.reload(),!1;!n.flag&&r.z8.error(n.message),k(e.config);const t=setTimeout((()=>{f&&f.close(),clearTimeout(t)}),p.Z.HIDE_LOADING_TIME);return e.data}),(e=>{const l=setTimeout((()=>{f&&f.close(),clearTimeout(l)}),p.Z.HIDE_LOADING_TIME);if(e.response){const l=e.response,n=l.status;if(g.includes(n)){if([401,403].includes(n))return void s.T.confirm("当前用户已被登出或无权限访问当前资源，请尝试重新登录后再操作。","无权限访问",{type:"error",center:!0,showClose:!1,showCancelButton:!1,closeOnClickModal:!1,confirmButtonText:"重新登录"}).then((()=>{(0,m.xY)(),d.Z.replace({path:"/login"})})).catch((()=>{}));c.bM.error({title:"请求错误",message:h[n]})}else c.bM.error({title:"请求错误",message:l.data.message||`Status:${l.status}，未知错误！`})}else console.error(e),c.bM.error({title:"请求错误",message:"请求服务器无响应！"});return Promise.reject(e.response)})),l.Z=a()},5817:function(e,l,n){n.r(l),n.d(l,{default:function(){return v}});var t=n(3396),a=n(4870),o=n(5499),u=n(2807),i=n(5631),r=n(3626);const s=(e=>((0,t.dD)("data-v-125e1e46"),e=e(),(0,t.Cn)(),e))((()=>(0,t._)("span",{class:"select-text"},"切换角色",-1))),c=(0,t.Uk)("角色查看"),d=(0,t.Uk)("编辑权限"),p=(0,t.Uk)("查看权限"),m=(0,t.Uk)("删除");var f={setup(e){const l=(0,t.RC)((()=>n.e(5379).then(n.bind(n,5379)))),f=(0,t.RC)((()=>n.e(8653).then(n.bind(n,8653)))),v=(0,t.RC)((()=>n.e(4590).then(n.bind(n,3618)))),g=(0,a.iH)(0),h=(0,a.iH)(0),w=(0,a.iH)(""),b=(0,a.iH)(""),k=(0,a.iH)(""),C=(0,a.iH)(""),W=(0,a.iH)(""),_=(0,a.iH)(!1),y=(0,a.iH)(!1),O=(0,a.iH)([]),{page:T,pageSize:x}=function(){const{size:e=10}=r.Z,l=(0,a.iH)(r.Z.page),n=(0,a.iH)(e);return{page:l,pageSize:n,handleSizeChange:function(e){n.value=e},handlePageChange:function(e){l.value=e}}}();function H(e){x.value=e,Z()}function U(e){T.value=e,Z()}function V({row:e},l){k.value=l,g.value=e.id,y.value=!0,W.value=e.roleName}async function Z(){const{flag:e,data:l={}}=await(0,i.xJ)({current:T.value,size:x.value,roleName:b.value});e&&(h.value=l.total,O.value=l.records)}function E(){b.value&&(T.value=1,x.value=10,Z())}(0,t.bv)((async()=>{Z()}));const I=[{value:"Option1",label:"Option1"},{value:"Option2",label:"Option2"},{value:"Option3",label:"Option3"},{value:"Option4",label:"Option4"},{value:"Option5",label:"Option5"}];return(e,n)=>{const i=(0,t.up)("el-input"),r=(0,t.up)("Button"),T=(0,t.up)("el-col"),x=(0,t.up)("el-option"),Z=(0,t.up)("el-select"),N=(0,t.up)("el-row"),M=(0,t.up)("el-table-column"),S=(0,t.up)("el-link"),z=(0,t.up)("el-switch"),A=(0,t.up)("el-button"),R=(0,t.up)("el-table"),$=(0,t.up)("el-card"),D=(0,t.up)("ComWrapper");return(0,t.wg)(),(0,t.j4)(D,null,{default:(0,t.w5)((()=>[(0,t.Wm)($,{shadow:"never"},{default:(0,t.w5)((()=>[(0,t.Wm)(N,{gutter:20},{default:(0,t.w5)((()=>[(0,t.Wm)(T,{span:16,class:"input-wrap"},{default:(0,t.w5)((()=>[(0,t.Wm)(i,{placeholder:"请输入角色名称",modelValue:b.value,"onUpdate:modelValue":n[0]||(n[0]=e=>b.value=e),style:{"margin-right":"10px"}},null,8,["modelValue"]),(0,t.Wm)(r,{icon:"el-icon-search",text:"搜索",onBtnClick:E}),(0,t.Wm)(r,{icon:"el-icon-circle-plus",text:"添加"})])),_:1}),(0,t.Wm)(T,{span:8},{default:(0,t.w5)((()=>[s,(0,t.Wm)(Z,{modelValue:w.value,"onUpdate:modelValue":n[1]||(n[1]=e=>w.value=e),placeholder:"切换角色"},{default:(0,t.w5)((()=>[((0,t.wg)(),(0,t.iD)(t.HY,null,(0,t.Ko)(I,(e=>(0,t.Wm)(x,{key:e.value,label:e.label,value:e.value},null,8,["label","value"]))),64))])),_:1},8,["modelValue"])])),_:1})])),_:1}),(0,t.Wm)(R,{data:O.value,style:{width:"100%","margin-top":"20px"},stripe:""},{default:(0,t.w5)((()=>[(0,t.Wm)(M,{prop:"roleName",label:"角色名称",width:"300"}),(0,t.Wm)(M,{prop:"description",label:"角色说明",width:"230"}),(0,t.Wm)(M,{label:"角色成员",width:"200"},{default:(0,t.w5)((e=>[(0,t.Wm)(S,{type:"primary",underline:"",onClick:l=>function({row:e}){_.value=!0,C.value=`${e.roleName} 权限`}(e)},{default:(0,t.w5)((()=>[c])),_:2},1032,["onClick"])])),_:1}),(0,t.Wm)(M,{label:"角色权限",width:"330"},{default:(0,t.w5)((e=>[(0,t.Wm)(S,{type:"primary",underline:"",onClick:l=>V(e,"edit"),style:{"margin-right":"20px"}},{default:(0,t.w5)((()=>[d])),_:2},1032,["onClick"]),(0,t.Wm)(S,{type:"primary",underline:"",onClick:l=>V(e,"show")},{default:(0,t.w5)((()=>[p])),_:2},1032,["onClick"])])),_:1}),(0,t.Wm)(M,{label:"是否禁用",width:"200"},{default:(0,t.w5)((e=>[(0,t.Wm)(z,{modelValue:e.row.isUsed,"onUpdate:modelValue":l=>e.row.isUsed=l,disabled:""},null,8,["modelValue","onUpdate:modelValue"])])),_:1}),(0,t.Wm)(M,{label:"操作"},{default:(0,t.w5)((e=>[(0,t.Wm)(A,{type:"danger",onClick:l=>function({row:e}){const{description:l}=e;o.T.confirm((0,t.h)("p",null,[(0,t.h)("span",null,"确定要删除  "),(0,t.h)("i",{style:"color: teal"},l),(0,t.h)("span",null,"  吗？")]),"温馨提示",{confirmButtonText:"OK",cancelButtonText:"Cancel",type:"warning"}).then((()=>{u.z8.error(`抱歉，${l}暂时不能删除`)}))}(e)},{default:(0,t.w5)((()=>[m])),_:2},1032,["onClick"])])),_:1})])),_:1},8,["data"])])),_:1}),(0,t.Wm)((0,a.SU)(l),{total:h.value,onOnSizeChange:H,onOnPageChange:U},null,8,["total"]),(0,t.Wm)((0,a.SU)(f),{roleName:C.value,modelValue:_.value,"onUpdate:modelValue":n[2]||(n[2]=e=>_.value=e)},null,8,["roleName","modelValue"]),(0,t.Wm)((0,a.SU)(v),{modelValue:y.value,"onUpdate:modelValue":n[3]||(n[3]=e=>y.value=e),roleId:g.value,title:W.value,type:k.value},null,8,["modelValue","roleId","title","type"])])),_:1})}}},v=(0,n(89).Z)(f,[["__scopeId","data-v-125e1e46"]])}}]);