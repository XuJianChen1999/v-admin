"use strict";(self.webpackChunkdemo=self.webpackChunkdemo||[]).push([[3402],{8869:function(e,t,n){n.r(t),n.d(t,{default:function(){return s}});var a=n(3396),i=n(4870),o=n(2807);n(2801),n(8675),n(3462);const l={style:{"margin-top":"20px"}},u=(0,a.Uk)("关闭摄像头"),r=(0,a.Uk)("截图图片");var s={setup(e){const t=(0,i.iH)(null),n=(0,i.iH)(null);let s;if(navigator.mediaDevices&&navigator.mediaDevices.getUserMedia){const e={video:!0,audio:!1};navigator.mediaDevices.getUserMedia(e).then((function(e){console.log(e),s="function"==typeof e.stop?e:e.getTracks()[0],t.value.srcObject=e})).catch((function({name:e,message:t}){o.z8.warning(`${e}：${{"Requested device not found":"该设备暂时没有摄像头"}[t]}`)}))}else console.log(navigator),o.z8.warning("该设备暂不支持 getUserMedia");function c(){n.value.width=600,n.value.height=400;const e=n.value;n.value.getContext("2d").drawImage(t.value,0,0,e.width,e.height);const a=n.value.toDataURL("image/png"),i=((e,t)=>{const n=((e,t,n="image/png")=>new File([e],t,{type:n,lastModified:Date.now()}))((e=>{const t=atob(e.split(",")[1]),n=new ArrayBuffer(t.length),a=new Uint8Array(n);for(var i=0;i<t.length;i++)a[i]=t.charCodeAt(i);return new Blob([a],{type:"image/png"})})(e),t);return n})(a,"123");o.z8.success("控制台查看图片路径"),console.log(a,i)}function d(){s&&s.stop()}return(e,i)=>{const o=(0,a.up)("el-col"),s=(0,a.up)("el-row"),g=(0,a.up)("el-button"),p=(0,a.up)("ComWrapper");return(0,a.wg)(),(0,a.j4)(p,null,{default:(0,a.w5)((()=>[(0,a.Wm)(s,{justify:"space-between"},{default:(0,a.w5)((()=>[(0,a.Wm)(o,{lg:10},{default:(0,a.w5)((()=>[(0,a._)("video",{ref_key:"videoRef",ref:t,autoplay:"",playsinline:"",id:"player"},null,512)])),_:1}),(0,a.Wm)(o,{lg:10},{default:(0,a.w5)((()=>[(0,a._)("canvas",{ref_key:"canvasRef",ref:n,width:"600px",height:"400px",id:"canvas"},null,512)])),_:1})])),_:1}),(0,a._)("div",l,[(0,a.Wm)(g,{type:"primary",onClick:d},{default:(0,a.w5)((()=>[u])),_:1}),(0,a.Wm)(g,{type:"primary",onClick:c},{default:(0,a.w5)((()=>[r])),_:1})])])),_:1})}}}}}]);